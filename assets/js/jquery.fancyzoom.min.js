/*!
 * jQuery FancyZoom Plugin
 * version: 1.0.1 (20-APR-2014)
 * @requires jQuery v1.6.2 or later
 *
 * Examples and documentation at: http://github.com/keegnotrub/jquery.fancyzoom/
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
!function(a){a.extend(jQuery.easing,{easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}}),a.fn.fancyZoom=function(b){function e(b){b.childNodes.length>0&&(b=b.childNodes[0]);var c=a(b),d=c.offset().left,e=c.offset().top,f=c.width()||50,g=c.height()||12;return{left:d,top:e,width:f,height:g}}function f(){var b=a(window),c=b.width(),d=b.height(),e=b.scrollLeft(),f=b.scrollTop();return{width:c,height:d,scrollX:e,scrollY:f}}function g(b){function r(a){g?(p.css("backgroundPosition","0px "+-50*j+"px"),j=(j+1)%12):(clearInterval(i),i=0,j=0,p.hide(),t(a))}function s(a){p.css({left:l.width/2+l.scrollX+"px",top:l.height/2+l.scrollY+"px",backgroundPosition:"0px 0px",display:"block"}),j=0,i=setInterval(function(){r(a)},100)}function t(b){if(d)return!1;d=!0,n.attr("src",b.getAttribute("href"));var e=h.width,f=h.height,g=e/f;e>l.width-c.minBorder&&(e=l.width-c.minBorder,f=e/g),f>l.height-c.minBorder&&(f=l.height-c.minBorder,e=f*g);var i=l.height/2-f/2+l.scrollY,j=l.width/2-e/2+l.scrollX;o.hide(),m.hide().css({left:k.left+"px",top:k.top+"px",width:k.width+"px",height:k.height+"px",opacity:"hide"}),m.animate({left:j+"px",top:i+"px",width:e+"px",height:f+"px",opacity:"show"},200,"easeInOutCubic",function(){o.fadeIn(),o.click(u),m.click(u),a(document).keyup(v),d=!1})}function u(){return d?!1:(d=!0,o.hide(),m.animate({left:k.left+"px",top:k.top+"px",opacity:"hide",width:k.width+"px",height:k.height+"px"},200,"easeInOutCubic",function(){d=!1}),m.unbind("click",u),o.unbind("click",u),a(document).unbind("keyup",v),void 0)}function v(a){27==a.keyCode&&u()}var k,l,m,n,o,p,c=b,d=!1,g=!1,h=new Image,i=0,j=0,q=this;m=a("#zoom"),0===m.length&&(m=a(document.createElement("div")),m.attr("id","zoom"),a("body").append(m)),n=a("#zoom_img"),0===n.length&&(n=a(document.createElement("img")),n.attr("id","zoom_img"),m.append(n)),o=a("#zoom_close"),0===o.length&&(o=a(document.createElement("div")),o.attr("id","zoom_close"),m.append(o)),p=a("#zoom_spin"),0===p.length&&(p=a(document.createElement("div")),p.attr("id","zoom_spin"),a("body").append(p)),this.preload=function(){var c=this.getAttribute("href");h.src!==c&&(g=!0,h=new Image,a(h).load(function(){g=!1}),h.src=c)},this.show=function(a){l=f(),k=e(this),q.preload.call(this,a),g?0===i&&s(this):t(this),a.preventDefault()}}var c=a.extend({minBorder:90},b),d=new g(c);this.each(function(){var c=a(this);c.mouseover(d.preload),c.click(d.show)})}}(jQuery);